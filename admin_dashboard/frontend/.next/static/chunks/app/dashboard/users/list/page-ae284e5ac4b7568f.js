(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6939],{49418:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let a=t(95125).A.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>e,e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var s;return(null==(s=e.response)?void 0:s.status)===401&&console.error("Unauthorized access"),Promise.reject(e)});let r=a},75811:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(95155),r=t(12115),n=t(52619),l=t.n(n),c=t(94971),d=t(22663);function i(){let[e,s]=(0,r.useState)([]),[t,n]=(0,r.useState)(!0),[i,o]=(0,r.useState)(""),[x,u]=(0,r.useState)("all");(0,r.useEffect)(()=>{h()},[i,x]);let h=async()=>{try{n(!0);let e={};i&&(e.search=i),"all"!==x&&(e.is_banned="banned"===x);let t=await c.d.getAll(e);s(t.data.users||[])}catch(e){d.Ay.error("Failed to fetch users"),console.error(e)}finally{n(!1)}},m=async e=>{let s=prompt("Enter ban reason:");if(s)try{await c.d.ban(e,s),d.Ay.success("User banned successfully"),h()}catch(e){d.Ay.error("Failed to ban user")}},p=async e=>{try{await c.d.unban(e),d.Ay.success("User unbanned successfully"),h()}catch(e){d.Ay.error("Failed to unban user")}};return(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"User Management"}),(0,a.jsx)(l(),{href:"/dashboard/users/segments",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"User Segments"})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Search users by name or email...",value:i,onChange:e=>o(e.target.value),className:"px-4 py-2 border rounded-lg"}),(0,a.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"px-4 py-2 border rounded-lg",children:[(0,a.jsx)("option",{value:"all",children:"All Users"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"banned",children:"Banned"})]})]})}),t?(0,a.jsx)("div",{className:"text-center py-12",children:"Loading..."}):0===e.length?(0,a.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No users found"}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Joined"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:null==(s=e.name)?void 0:s.charAt(0).toUpperCase()}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.is_banned?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:e.is_banned?"Banned":"Active"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l(),{href:"/dashboard/users/".concat(e._id),className:"text-blue-600 hover:underline",children:"View"}),(0,a.jsx)(l(),{href:"/dashboard/users/".concat(e._id,"/activity"),className:"text-green-600 hover:underline",children:"Activity"}),e.is_banned?(0,a.jsx)("button",{onClick:()=>p(e._id),className:"text-orange-600 hover:underline",children:"Unban"}):(0,a.jsx)("button",{onClick:()=>m(e._id),className:"text-red-600 hover:underline",children:"Ban"})]})})]},e._id)})})]})})]})}},82132:(e,s,t)=>{Promise.resolve().then(t.bind(t,75811))},94971:(e,s,t)=>{"use strict";t.d(s,{d:()=>r});var a=t(49418);let r={getAll:e=>a.A.get("/admin/users",{params:e}),getById:e=>a.A.get("/admin/users/".concat(e)),update:(e,s)=>a.A.put("/admin/users/".concat(e),s),ban:(e,s)=>a.A.post("/admin/users/".concat(e,"/ban"),{reason:s}),unban:e=>a.A.post("/admin/users/".concat(e,"/unban")),getActivity:(e,s)=>a.A.get("/admin/users/".concat(e,"/activity"),{params:s}),getSegments:()=>a.A.get("/admin/users/segments"),getStats:()=>a.A.get("/admin/users/stats")}}},e=>{e.O(0,[5125,2663,2619,8441,1255,7358],()=>e(e.s=82132)),_N_E=e.O()}]);