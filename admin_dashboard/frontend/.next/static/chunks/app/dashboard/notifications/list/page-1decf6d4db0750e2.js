(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9447],{18085:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(71847).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},56736:(e,t,a)=>{Promise.resolve().then(a.bind(a,75440))},71847:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(12115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:h,...u}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:o?24*Number(l)/Number(s):l,className:n("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),o=(e,t)=>{let a=(0,r.forwardRef)((a,i)=>{let{className:o,...c}=a;return(0,r.createElement)(l,{ref:i,iconNode:t,className:n("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return a.displayName=s(e),a}},75440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155),s=a(12115),n=a(52619),i=a.n(n),l=a(95125),o=a(71847);let c=(0,o.A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var d=a(18085);let h=(0,o.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function u(){let[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=await l.A.get("/api/admin/notifications");t(e.data.data||[])}catch(e){console.error("Error fetching notifications:",e)}finally{n(!1)}},u=async e=>{if(confirm("Are you sure you want to send this notification?"))try{await l.A.post("/api/admin/notifications/".concat(e,"/send")),o(),alert("Notification sent successfully!")}catch(e){console.error("Error sending notification:",e),alert("Failed to send notification")}},x=async e=>{if(confirm("Are you sure you want to delete this notification?"))try{await l.A.delete("/api/admin/notifications/".concat(e)),o()}catch(e){console.error("Error deleting notification:",e),alert("Failed to delete notification")}};return a?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"text-lg text-gray-600",children:"Loading notifications..."})}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Push Notifications"}),(0,r.jsxs)(i(),{href:"/dashboard/notifications/create",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 flex items-center gap-2",children:[(0,r.jsx)(c,{size:20}),"Create Notification"]})]}),(0,r.jsx)("div",{className:"grid gap-4",children:0===e.length?(0,r.jsx)("div",{className:"bg-white p-8 rounded-lg shadow text-center text-gray-500",children:"No notifications found. Create your first notification!"}):e.map(e=>(0,r.jsx)("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:e.title}),(0,r.jsx)("span",{className:"px-3 py-1 text-xs rounded-full font-semibold ".concat((e=>{switch(e){case"sent":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"draft":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status)),children:e.status}),(0,r.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:e.priority})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-3",children:e.message}),(0,r.jsxs)("div",{className:"flex gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["Audience: ",e.target_audience]}),e.sent_count>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:["Sent: ",e.sent_count]}),(0,r.jsxs)("span",{children:["Opened: ",e.opened_count," (",Math.round(e.opened_count/e.sent_count*100),"%)"]})]})]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:e.scheduled_for?"Scheduled for: ".concat(new Date(e.scheduled_for).toLocaleString()):"Created: ".concat(new Date(e.created_at).toLocaleString())})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:["draft"===e.status&&(0,r.jsxs)("button",{onClick:()=>u(e._id),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center gap-2",children:[(0,r.jsx)(d.A,{size:16}),"Send"]}),(0,r.jsx)("button",{onClick:()=>x(e._id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,r.jsx)(h,{size:18})})]})]})},e._id))})]})}}},e=>{e.O(0,[5125,2619,8441,1255,7358],()=>e(e.s=56736)),_N_E=e.O()}]);