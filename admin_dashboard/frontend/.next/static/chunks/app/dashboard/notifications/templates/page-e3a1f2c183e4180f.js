(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3822],{40485:(e,t,s)=>{Promise.resolve().then(s.bind(s,65330))},49418:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let l=s(95125).A.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>e,e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&console.error("Unauthorized access"),Promise.reject(e)});let a=l},65330:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var l=s(95155),a=s(12115),r=s(49418);let n={getAll:e=>r.A.get("/admin/notifications",{params:e}),create:e=>r.A.post("/admin/notifications",e),delete:e=>r.A.delete("/admin/notifications/".concat(e))};var i=s(22663);function c(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)({name:"",title:"",body:"",type:"info"});(0,a.useEffect)(()=>{u()},[]);let u=async()=>{try{r(!0);let e=await n.getAll({type:"template"});t(e.data.notifications||[])}catch(e){i.Ay.error("Failed to fetch templates"),console.error(e)}finally{r(!1)}},x=async e=>{e.preventDefault();try{await n.create({...o,is_template:!0}),i.Ay.success("Template created successfully"),d(!1),m({name:"",title:"",body:"",type:"info"}),u()}catch(e){i.Ay.error("Failed to create template")}},p=async e=>{if(confirm("Are you sure?"))try{await n.delete(e),i.Ay.success("Template deleted"),u()}catch(e){i.Ay.error("Failed to delete template")}};return(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Notification Templates"}),(0,l.jsx)("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Template"})]}),s?(0,l.jsx)("div",{className:"text-center py-12",children:"Loading..."}):0===e.length?(0,l.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No templates found"}):(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:e.name||e.title}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.body}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("info"===e.type?"bg-blue-100 text-blue-800":"success"===e.type?"bg-green-100 text-green-800":"warning"===e.type?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.type}),(0,l.jsx)("button",{onClick:()=>p(e._id),className:"text-red-600 hover:underline text-sm",children:"Delete"})]})]},e._id))}),c&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Create Template"}),(0,l.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Name *"}),(0,l.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>m({...o,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),(0,l.jsx)("input",{type:"text",required:!0,value:o.title,onChange:e=>m({...o,title:e.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Body *"}),(0,l.jsx)("textarea",{required:!0,value:o.body,onChange:e=>m({...o,body:e.target.value}),className:"w-full px-4 py-2 border rounded-lg",rows:4})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Type"}),(0,l.jsxs)("select",{value:o.type,onChange:e=>m({...o,type:e.target.value}),className:"w-full px-4 py-2 border rounded-lg",children:[(0,l.jsx)("option",{value:"info",children:"Info"}),(0,l.jsx)("option",{value:"success",children:"Success"}),(0,l.jsx)("option",{value:"warning",children:"Warning"}),(0,l.jsx)("option",{value:"error",children:"Error"})]})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create"}),(0,l.jsx)("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})}}},e=>{e.O(0,[5125,2663,8441,1255,7358],()=>e(e.s=40485)),_N_E=e.O()}]);