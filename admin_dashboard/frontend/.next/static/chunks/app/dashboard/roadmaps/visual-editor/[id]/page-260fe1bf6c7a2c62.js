(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8188],{4598:(e,a,t)=>{"use strict";t.d(a,{O:()=>d});var s=t(49418);let d={getAll:async e=>(await s.A.get("/admin/roadmaps",{params:e})).data,getById:async e=>(await s.A.get("/admin/roadmaps/".concat(e))).data,create:async e=>(await s.A.post("/admin/roadmaps",e)).data,generateAI:async e=>(await s.A.post("/admin/roadmaps/generate-ai",e)).data,update:async(e,a)=>(await s.A.put("/admin/roadmaps/".concat(e),a)).data,delete:async e=>(await s.A.delete("/admin/roadmaps/".concat(e))).data,togglePublish:async e=>(await s.A.post("/admin/roadmaps/".concat(e,"/toggle-publish"))).data,addNode:async(e,a)=>(await s.A.post("/admin/roadmaps/".concat(e,"/nodes"),a)).data,updateNode:async(e,a,t)=>(await s.A.put("/admin/roadmaps/".concat(e,"/nodes/").concat(a),t)).data,deleteNode:async(e,a)=>(await s.A.delete("/admin/roadmaps/".concat(e,"/nodes/").concat(a))).data,getStats:async()=>(await s.A.get("/admin/roadmaps/stats")).data}},23024:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var s=t(95155),d=t(12115),n=t(20063),i=t(71482),o=t(95535),r=t(33434),c=t(49941);t(44669);var l=t(4598),p=t(22663);function m(){let e=(0,n.useParams)(),a=(0,n.useRouter)(),t=e.id,[m,u,x]=(0,i.ck)([]),[h,g,y]=(0,i.fM)([]),[b,f]=(0,d.useState)(null),[j,v]=(0,d.useState)(!0),[N,w]=(0,d.useState)(!1);(0,d.useEffect)(()=>{A()},[t]);let A=async()=>{try{v(!0);let e=(await l.O.getById(t)).roadmap;f(e);let a=e.nodes.map(e=>({id:e.id||e.node_id,type:"default",position:{x:e.position_x,y:e.position_y},data:{label:e.title,description:e.description,type:e.type},style:{background:"content"===e.type?"#3b82f6":"roadmap_link"===e.type?"#8b5cf6":"#10b981",color:"white",padding:"10px",borderRadius:"8px",minWidth:"150px"}})),s=[];e.nodes.forEach(e=>{let a=e.id||e.node_id;e.connections.forEach(e=>{s.push({id:"".concat(a,"-").concat(e),source:a,target:e,animated:!0})})}),u(a),g(s)}catch(e){p.Ay.error("Failed to fetch roadmap"),console.error(e)}finally{v(!1)}},k=(0,d.useCallback)(e=>g(a=>(0,i.rN)(e,a)),[g]),_=async()=>{try{w(!0);let e=m.map(e=>{let a=h.filter(a=>a.source===e.id).map(e=>e.target);return{id:e.id,title:e.data.label,description:e.data.description||"",type:e.data.type||"content",position_x:e.position.x,position_y:e.position.y,connections:a}});await l.O.update(t,{nodes:e}),p.Ay.success("Roadmap saved successfully")}catch(e){p.Ay.error("Failed to save roadmap"),console.error(e)}finally{w(!1)}};return j?(0,s.jsx)("div",{className:"p-6 text-center",children:"Loading roadmap..."}):(0,s.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,s.jsxs)("div",{className:"bg-white p-4 border-b flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:null==b?void 0:b.title}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:null==b?void 0:b.description})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:_,disabled:N,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:N?"Saving...":"Save Changes"}),(0,s.jsx)("button",{onClick:()=>a.back(),className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400",children:"Back"})]})]}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsxs)(i.Gc,{nodes:m,edges:h,onNodesChange:x,onEdgesChange:y,onConnect:k,fitView:!0,children:[(0,s.jsx)(o.H,{}),(0,s.jsx)(r.o,{}),(0,s.jsx)(c.V,{gap:12,size:1})]})}),(0,s.jsx)("div",{className:"bg-white p-4 border-t",children:(0,s.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-blue-600 rounded"}),(0,s.jsx)("span",{children:"Content Node"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-purple-600 rounded"}),(0,s.jsx)("span",{children:"Roadmap Link"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 bg-green-600 rounded"}),(0,s.jsx)("span",{children:"Article Link"})]})]})})]})}},49418:(e,a,t)=>{"use strict";t.d(a,{A:()=>d});let s=t(95125).A.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>e,e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>{var a;return(null==(a=e.response)?void 0:a.status)===401&&console.error("Unauthorized access"),Promise.reject(e)});let d=s},89679:(e,a,t)=>{Promise.resolve().then(t.bind(t,23024))}},e=>{e.O(0,[9718,8702,5125,2663,8540,8441,1255,7358],()=>e(e.s=89679)),_N_E=e.O()}]);