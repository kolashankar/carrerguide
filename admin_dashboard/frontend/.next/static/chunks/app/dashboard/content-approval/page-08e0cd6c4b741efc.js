(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7109],{8008:(e,t,s)=>{Promise.resolve().then(s.bind(s,10012))},10012:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(95155),r=s(12115),a=s(49418);let l={getPending:e=>a.A.get("/admin/content/pending",{params:e}),approve:(e,t)=>a.A.post("/admin/content/".concat(e,"/approve"),{comment:t}),reject:(e,t)=>a.A.post("/admin/content/".concat(e,"/reject"),{comment:t})};var c=s(22663);function i(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{a(!0);let e=await l.getPending();t(e.data.submissions||[])}catch(e){c.Ay.error("Failed to fetch pending items"),console.error(e)}finally{a(!1)}},p=async e=>{let t=prompt("Add approval comment (optional):");try{await l.approve(e,t||void 0),c.Ay.success("Content approved successfully"),d()}catch(e){c.Ay.error("Failed to approve content")}},x=async e=>{let t=prompt("Rejection reason (required):");if(t)try{await l.reject(e,t),c.Ay.success("Content rejected"),d()}catch(e){c.Ay.error("Failed to reject content")}};return(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Content Approval Workflow"}),s?(0,n.jsx)("div",{className:"text-center py-12",children:"Loading..."}):0===e.length?(0,n.jsx)("div",{className:"text-center py-12 text-gray-500",children:"No pending approvals"}):(0,n.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,n.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,n.jsx)("h3",{className:"text-xl font-bold",children:e.title}),(0,n.jsx)("span",{className:"px-2 py-1 rounded text-xs bg-yellow-100 text-yellow-800",children:e.content_type})]}),(0,n.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,n.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500",children:[(0,n.jsxs)("span",{children:["Submitted by: ",e.submitted_by]}),(0,n.jsxs)("span",{children:["Date: ",new Date(e.submitted_at).toLocaleDateString()]})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[(0,n.jsx)("button",{onClick:()=>o(e),className:"text-blue-600 hover:underline text-sm",children:"View Details"}),(0,n.jsx)("button",{onClick:()=>p(e._id),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-sm",children:"Approve"}),(0,n.jsx)("button",{onClick:()=>x(e._id),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 text-sm",children:"Reject"})]})]})},e._id))}),i&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-3xl max-h-[80vh] overflow-y-auto",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-4",children:i.title}),(0,n.jsxs)("div",{className:"prose max-w-none mb-4",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Type:"})," ",i.content_type]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Submitted by:"})," ",i.submitted_by]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Submitted at:"})," ",new Date(i.submitted_at).toLocaleString()]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("strong",{children:"Content:"}),(0,n.jsx)("div",{className:"mt-2 p-4 bg-gray-50 rounded",children:JSON.stringify(i.content,null,2)})]})]}),(0,n.jsx)("button",{onClick:()=>o(null),className:"bg-gray-300 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})})]})}},49418:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let n=s(95125).A.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>e,e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&console.error("Unauthorized access"),Promise.reject(e)});let r=n}},e=>{e.O(0,[5125,2663,8441,1255,7358],()=>e(e.s=8008)),_N_E=e.O()}]);