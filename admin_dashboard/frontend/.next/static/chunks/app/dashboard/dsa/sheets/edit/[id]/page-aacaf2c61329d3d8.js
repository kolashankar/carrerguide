(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2686],{1637:(e,s,t)=>{Promise.resolve().then(t.bind(t,74626))},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},46675:(e,s,t)=>{"use strict";t.d(s,{L:()=>n});var a=t(49418);let n={topics:{getAll:e=>a.A.get("/admin/dsa/topics",{params:e}),getById:e=>a.A.get("/admin/dsa/topics/".concat(e)),create:e=>a.A.post("/admin/dsa/topics",e),update:(e,s)=>a.A.put("/admin/dsa/topics/".concat(e),s),delete:e=>a.A.delete("/admin/dsa/topics/".concat(e)),getStats:()=>a.A.get("/admin/dsa/topics/stats")},questions:{getAll:e=>a.A.get("/admin/dsa/questions",{params:e}),getById:e=>a.A.get("/admin/dsa/questions/".concat(e)),create:e=>a.A.post("/admin/dsa/questions",e),update:(e,s)=>a.A.put("/admin/dsa/questions/".concat(e),s),delete:e=>a.A.delete("/admin/dsa/questions/".concat(e)),generateAI:e=>a.A.post("/admin/dsa/questions/generate-ai",e),getStatsByDifficulty:()=>a.A.get("/admin/dsa/questions/stats/difficulty"),getStatsByTopic:()=>a.A.get("/admin/dsa/questions/stats/topic")},sheets:{getAll:e=>a.A.get("/admin/dsa/sheets",{params:e}),getById:e=>a.A.get("/admin/dsa/sheets/".concat(e)),create:e=>a.A.post("/admin/dsa/sheets",e),update:(e,s)=>a.A.put("/admin/dsa/sheets/".concat(e),s),delete:e=>a.A.delete("/admin/dsa/sheets/".concat(e)),generateAI:e=>a.A.post("/admin/dsa/sheets/generate-ai",e),addQuestion:(e,s)=>a.A.post("/admin/dsa/sheets/".concat(e,"/questions"),{question_id:s}),removeQuestion:(e,s)=>a.A.delete("/admin/dsa/sheets/".concat(e,"/questions/").concat(s)),togglePublish:e=>a.A.post("/admin/dsa/sheets/".concat(e,"/toggle-publish")),getStats:()=>a.A.get("/admin/dsa/sheets/stats")},companies:{getAll:e=>a.A.get("/admin/dsa/companies",{params:e}),getById:e=>a.A.get("/admin/dsa/companies/".concat(e)),create:e=>a.A.post("/admin/dsa/companies",e),update:(e,s)=>a.A.put("/admin/dsa/companies/".concat(e),s),delete:e=>a.A.delete("/admin/dsa/companies/".concat(e)),getStats:()=>a.A.get("/admin/dsa/companies/stats"),getTop:()=>a.A.get("/admin/dsa/companies/top")}}},49418:(e,s,t)=>{"use strict";t.d(s,{A:()=>n});let a=t(95125).A.create({baseURL:"http://localhost:8001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>e,e=>Promise.reject(e)),a.interceptors.response.use(e=>e,e=>{var s;return(null==(s=e.response)?void 0:s.status)===401&&console.error("Unauthorized access"),Promise.reject(e)});let n=a},74626:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var a=t(95155),n=t(12115),i=t(20063),d=t(46675),r=t(22663);function l(){let e=(0,i.useRouter)(),s=(0,i.useParams)().id,[t,l]=(0,n.useState)(!1),[o,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)([]),[p,h]=(0,n.useState)({name:"",description:"",author:"",level:"beginner",tags:"",questions:[],is_published:!1});(0,n.useEffect)(()=>{g(),x()},[s]);let g=async()=>{try{var e,t;c(!0);let a=(await d.L.sheets.getById(s)).data.sheet;h({name:a.name||"",description:a.description||"",author:a.author||"",level:a.level||"beginner",tags:(null==(e=a.tags)?void 0:e.join(", "))||"",questions:a.questions||[],is_published:null!=(t=a.is_published)&&t})}catch(e){console.error("Error fetching sheet:",e),r.Ay.error("Failed to load sheet data")}finally{c(!1)}},x=async()=>{try{let e=await d.L.questions.getAll({});m(e.data.questions||[])}catch(e){console.error("Error fetching questions:",e)}},b=async t=>{t.preventDefault(),l(!0);try{let t={...p,tags:p.tags.split(",").map(e=>e.trim()).filter(e=>e)};await d.L.sheets.update(s,t),r.Ay.success("Sheet updated successfully!"),e.push("/dashboard/dsa/sheets/list")}catch(e){var a,n;console.error("Error updating sheet:",e),r.Ay.error((null==(n=e.response)||null==(a=n.data)?void 0:a.detail)||"Failed to update sheet")}finally{l(!1)}};return o?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"text-center py-12",children:"Loading sheet data..."})}):(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Edit DSA Sheet"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Update sheet information"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sheet Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:p.name,onChange:e=>h({...p,name:e.target.value}),placeholder:"e.g., Striver's SDE Sheet, LeetCode Top 100",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,a.jsx)("textarea",{required:!0,value:p.description,onChange:e=>h({...p,description:e.target.value}),placeholder:"Brief description of this sheet and its purpose",rows:4,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Author *"}),(0,a.jsx)("input",{type:"text",required:!0,value:p.author,onChange:e=>h({...p,author:e.target.value}),placeholder:"Author name",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level *"}),(0,a.jsxs)("select",{required:!0,value:p.level,onChange:e=>h({...p,level:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"beginner",children:"Beginner"}),(0,a.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,a.jsx)("option",{value:"advanced",children:"Advanced"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags (comma separated)"}),(0,a.jsx)("input",{type:"text",value:p.tags,onChange:e=>h({...p,tags:e.target.value}),placeholder:"e.g., arrays, strings, dynamic-programming",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Questions (",p.questions.length," selected)"]}),(0,a.jsx)("div",{className:"border rounded-lg p-4 max-h-96 overflow-y-auto space-y-2",children:0===u.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"No questions available"}):u.map(e=>(0,a.jsxs)("label",{className:"flex items-center p-3 border rounded hover:bg-gray-50 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:p.questions.includes(e._id),onChange:()=>{var s;return s=e._id,void h(e=>{let t=e.questions.includes(s)?e.questions.filter(e=>e!==s):[...e.questions,s];return{...e,questions:t}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,a.jsxs)("span",{className:"ml-3 flex-1",children:[(0,a.jsx)("span",{className:"font-medium",children:e.title}),(0,a.jsx)("span",{className:"ml-2 text-xs px-2 py-1 rounded ".concat("Easy"===e.difficulty?"bg-green-100 text-green-800":"Medium"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.difficulty})]})]},e._id))})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"is_published",checked:p.is_published,onChange:e=>h({...p,is_published:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,a.jsx)("label",{htmlFor:"is_published",className:"ml-2 text-sm font-medium text-gray-700",children:"Published"})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsx)("button",{type:"submit",disabled:t,className:"flex-1 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition disabled:bg-gray-400 font-semibold",children:t?"Updating...":"Update Sheet"}),(0,a.jsx)("button",{type:"button",onClick:()=>e.back(),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-semibold",children:"Cancel"})]})]})})]})}}},e=>{e.O(0,[5125,2663,8441,1255,7358],()=>e(e.s=1637)),_N_E=e.O()}]);